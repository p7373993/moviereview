{% extends "base.html" %} {% block content %}

<div class="container my-5">
  <h2 class="mb-4 fw-bold text-white">리뷰 수정</h2>

  {% if review_list %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-2 g-4">
    {% for review in review_list %}
    <div class="col">
      <div class="card h-100 shadow-sm" style="background-color: #444444">
        <div class="card-body d-flex">
          <!-- 영화 포스터 -->
          <img
            src="{{ review.movie.poster }}"
            class="me-3"
            style="
              width: 100px;
              height: 150px;
              object-fit: cover;
              border-radius: 6px;
            "
            alt="{{ review.movie.title }}"
          />

          <div class="flex-grow-1">
            <!-- 영화 제목 -->
            <h5 class="fw-bold mb-1">
              <a
                href="{% url 'mypage:review_edit' user.username review.id %}"
                class="text-decoration-none text-white"
              >
                {{ review.movie.title }}
              </a>
            </h5>

            <!-- 플랫폼 (예: NTV) -->
            <p class="mb-1 text-white">시리즈 ・ NTV</p>

            <!-- 리뷰 내용 -->
            <p class="mb-2" style="white-space: pre-line; color: #f5f5f5">
              {{ review.content|truncatechars:100 }}
            </p>

            <!-- 별점 -->
            <span class="badge bg-warning text-dark mb-2"
              >⭐ {{ review.score }}/5</span
            >
          </div>
        </div>

        <!-- 작성일 + 삭제 버튼 -->
        <div
          class="card-footer d-flex justify-content-between align-items-center"
        >
          <small class="text-muted">
            작성일: {{ review.created_at|date:"Y년 m월 d일 H:i" }}
          </small>

          <form
            method="post"
            action="{% url 'mypage:review_delete' user.username review.id %}"
            onsubmit="return confirm('정말 삭제하시겠습니까?');"
          >
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-outline-danger">
              삭제
            </button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}
  <div class="alert alert-info text-center mt-4" role="alert">
    아직 작성한 리뷰가 없습니다.
  </div>
  {% endif %}
</div>

{% endblock %}
