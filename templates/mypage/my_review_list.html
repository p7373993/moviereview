{% extends "base.html" %}

{% block content %}

<div class="container my-5">
  <h2 class="mb-4" style="color: #f5f5f5;">리뷰 수정</h2>

  {% if review_list %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for review in review_list %}
    <div class="col">
      <div class="card h-100 shadow-sm" style="background-color: #2c2c2c; color: #e0e0e0; transition: box-shadow 0.3s;">
        <div class="card-body">
          <h5
            class="card-title d-flex justify-content-between align-items-center"
            style="color: #f5f5f5;"
          >
            <a
              href="{% url 'mypage:review_edit' user.username review.id %}"
              class="text-decoration-none"
              style="color: #1e88e5; transition: color 0.3s;"
              onmouseover="this.style.color='#1565c0'"
              onmouseout="this.style.color='#1e88e5'"
            >
              {{ review.movie.title }}
            </a>
          </h5>

          <p class="card-text mb-2" style="white-space: pre-line">
            {{ review.content|truncatechars:100 }}
          </p>

          <div class="mb-2">
            <span class="badge bg-warning text-dark"
              style="color: #212121 !important;"
              >⭐ {{ review.score }}/5</span
            >
          </div>
        </div>

        <div
          class="card-footer d-flex justify-content-between align-items-center"
          style="background-color: #333333; border: none;"
        >
          <small style="color: #e0e0e0;">
            작성일: {{ review.created_at|date:"Y년 m월 d일 H:i" }}
          </small>

          <!-- 삭제 버튼 -->
          <form
            method="post"
            action="{% url 'mypage:review_delete' user.username review.id %}"
            onsubmit="return confirm('정말 삭제하시겠습니까?');"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="btn btn-sm"
              style="background-color: #1e88e5; color: #e0e0e0; border: none; transition: background-color 0.3s;"
              onmouseover="this.style.backgroundColor='#1565c0'"
              onmouseout="this.style.backgroundColor='#1e88e5'"
            >
              삭제
            </button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}
  <div class="alert text-center mt-4" role="alert" style="background-color: #333333; color: #e0e0e0; border: none;">
    아직 작성한 리뷰가 없습니다.
  </div>
  {% endif %}
</div>

<!-- 스타일 -->
<style>
  .card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  }
</style>

{% endblock %}